syntax = "proto3";

package Domic.Core.Identity.Grpc;

/*-------------------------------------------------------------------*/

//Login

message SignInRequest {
    String username = 1;
    String password = 2;
}

message SignInResponse {
    int32 code              = 1;
    string message          = 2;
    SignInResponseBody body = 3;
}

message SignInResponseBody {
    string token = 1;
}

/*-------------------------------------------------------------------*/

//ForgotPassword

message ResetPasswordRequest {
  String new_password  = 1;
  String email_address = 2;
  String email_code    = 3;
}

message ResetPasswordResponse {
  int32 code                     = 1;
  string message                 = 2;
  ResetPasswordResponseBody body = 3;
}

message ResetPasswordResponseBody {
  bool result = 1;
}

/*-------------------------------------------------------------------*/

//OtpGeneration

message OtpGenerationRequest {
    String phone_number = 1;
}

message OtpGenerationResponse {
    int32 code                     = 1;
    string message                 = 2;
    OtpGenerationResponseBody body = 3;
}

message OtpGenerationResponseBody {
    bool result = 1;
}

/*-------------------------------------------------------------------*/

//OtpVerification

message OtpVerificationRequest {
    String phone_number = 1;
    String code         = 2;
}

message OtpVerificationResponse {
    int32 code                       = 1;
    string message                   = 2;
    OtpVerificationResponseBody body = 3;
}

message OtpVerificationResponseBody {
    string token = 1;
}

/*-------------------------------------------------------------------*/

//EmailGenerationCode

message EmailOtpGenerationRequest {
  String email_address = 1;
}

message EmailOtpGenerationResponse {
  int32 code                          = 1;
  string message                      = 2;
  EmailOtpGenerationResponseBody body = 3;
}

message EmailOtpGenerationResponseBody {
  bool result = 1;
}

/*-------------------------------------------------------------------*/

//Global

message String { string value = 1; }

/*-------------------------------------------------------------------*/

service IdentityService {

    rpc SignIn(SignInRequest) returns (SignInResponse) {}
    rpc OtpGeneration(OtpGenerationRequest) returns (OtpGenerationResponse) {}
    rpc OtpVerification(OtpVerificationRequest) returns (OtpVerificationResponse) {}
    rpc EmailOtpGeneration(EmailOtpGenerationRequest) returns (EmailOtpGenerationResponse) {}
    rpc ResetPassword(ResetPasswordRequest) returns (ResetPasswordResponse) {}
    
}